import{a as p,t as D,c as K,b as le}from"./disclose-version.DNOMSOqa.js";import{p as re,u as se,a as ie,f as M,g as e,t as T,b as m,e as h,c as v,s as b,r as f,n as oe}from"./runtime.OG89zh0n.js";import{d as de,s as ce,e as me,b as ge,a as U}from"./store.gKuqoDWb.js";import{i as j}from"./if.CtPTF-io.js";import{t as ne,e as O,i as Q,f as ve}from"./index.Dq5DYXz9.js";import{a as fe,C as pe,e as be,s as R}from"./ContentName.CczeiV8W.js";import{r as ue,s as A}from"./gameStore.Dx_cMBBh.js";import{b as xe}from"./input.BhLvIKz-.js";import{a as _e,p as u}from"./props.BvWpH2GP.js";import{b as W}from"./this.Bf3WwSh3.js";import{p as he}from"./stores.C98PRf_Q.js";var ye=D("<div> </div>"),Ce=D('<a class="flex flex-col embla__slide xl:p-3.5 p-2.5 gap-[.4375rem] border-b border-gray-500 relative group w-full xl:h-64 lg:h-56 md:h-40 shrink-0 text-center"><div class="flex-1 bg-center bg-cover border border-gray-500"></div> <div> </div> <!> <div></div></a>'),Ie=D("<div> </div>"),Le=D('<a class="flex flex-col embla__slide xl:p-3.5 p-2.5 gap-[.4375rem] border-b border-gray-500 relative group w-full xl:h-64 lg:h-56 md:h-40 shrink-0 text-center"><div class="flex-1 bg-center bg-cover border border-gray-500"></div> <div> </div> <!> <div></div></a>'),ke=D('<div class="border border-gray-500 sticky xl:top-[calc(3.5rem+1.75rem+1px)] lg:top-[calc(3rem+1.5rem+1px)] md:top-[calc(3rem+1.25rem+1px)] xl:h-[calc(100svh-calc(7rem+1px))] lg:h-[calc(100svh-calc(6rem+1px))] md:h-[calc(100svh-calc(5.5rem+1px))] md:flex hidden flex-col xl:text-base text-sm xl:w-64 lg:w-56 md:w-40"><input type="search" class="relative w-full text-black bg-gray-200 placeholder:text-gray-700 xl:h-10 lg:h-9 md:h-8 xl:pl-4 lg:pl-3 md:pl-2 xl:pr-[3.25rem] lg:pr-[2.625rem] md:pr-8 focus:outline-none" placeholder="Search..."> <div class="flex-1 overflow-hidden text-xs embla xl:text-sm bg-stone-900"><div class="flex flex-col h-full embla__container"><!></div></div> <!></div>');function Pe(X,l){re(l,!0);const Y=ce(),g=()=>ge(he,"$page",Y);let q=_e(l,"searchedItems",7),Z={loop:!0,axis:"y",dragFree:!0},y=h(""),C=[],I=[],x=h(void 0),E=h(-1),z=h(-1),L=h(-1),B=h(-1),$=h(!0);function ee(r){m(x,u(r.detail)),m($,u(e(x).internalEngine().slideLooper.canLoop()))}const H=(r,s)=>{if(e(y)){const t=I.filter(a=>a);for(let a=0;a<t.length&&t[a];(a+=1)-1){const o=t[a];o.lastChild.classList.remove("bg-opacity-0"),o.lastChild.classList.add("bg-opacity-60")}const n=t[r];n.lastChild.classList.remove("bg-opacity-60"),n.lastChild.classList.add("bg-opacity-0")}else{const t=C;for(let a=0;a<t.length&&t[a];(a+=1)-1){const o=t[a];o.lastChild.classList.remove("bg-opacity-0"),o.lastChild.classList.add("bg-opacity-60")}const n=t[r];n.lastChild.classList.remove("bg-opacity-60"),n.lastChild.classList.add("bg-opacity-0")}e(x).scrollTo(r),l.type==="game"?m(E,u(s)):m(L,u(s))};se(()=>{var r,s;g().params.file||m(L,-1),e(y)&&q(l.items.filter(t=>t.title.toLowerCase().includes(e(y).toLowerCase()))),l.type==="game"?(m(z,u(l.items.findIndex(t=>t.url===`/games/${g().params.game}/files`))),e(x)&&e(x).scrollTo(e(z)),m(E,u((r=l.items.find(t=>t.url===`/games/${g().params.game}/files`))==null?void 0:r.id))):(m(B,u(l.items.findIndex(t=>`/games/${g().params.game}/files${t.url}`===g().url.pathname))),e(x)&&e(x).scrollTo(e(B)),m(L,u((s=l.items.find(t=>`/games/${g().params.game}/files${t.url}`===g().url.pathname))==null?void 0:s.id)))});var V=ke(),F=v(V);ue(F);var k=b(F,2),J=v(k),ae=v(J);j(ae,()=>e(y),r=>{var s=K(),t=M(s);O(t,17,q,Q,(n,a,o)=>{var i=Ce();i.__click=()=>H(o,e(a).id);var w=v(i),_=b(w,2),G=v(_,!0);f(_);var S=b(_,2);j(S,()=>l.type==="game",d=>{var c=ye(),P=v(c);f(c),T(()=>U(P,`(${e(a).releaseDate??""})`)),p(d,c)});var N=b(S,2);f(i),W(i,(d,c)=>I[c]=d,d=>I==null?void 0:I[d],()=>[o]),T(()=>{A(i,"href",l.type==="game"?`${e(a).url}`:`/games/${g().params.game}/files${e(a).url}`),A(w,"style",`background-image: url(${(l.type==="game"?e(a).gameImageUrl:e(a).fileImageUrl)??""});`),U(G,e(a).title),R(N,`absolute inset-0 transition-colors bg-black ${(e(a).id===(l.type==="game"?e(E):e(L))?"bg-opacity-0":"bg-opacity-60")??""} group-hover:bg-opacity-0`)}),p(n,i)}),p(r,s)},r=>{var s=K(),t=M(s);O(t,17,()=>l.items,Q,(n,a,o)=>{var i=Le();i.__click=()=>H(o,e(a).id);var w=v(i),_=b(w,2),G=v(_,!0);f(_);var S=b(_,2);j(S,()=>l.type==="game",d=>{var c=Ie(),P=v(c);f(c),T(()=>U(P,`(${e(a).releaseDate??""})`)),p(d,c)});var N=b(S,2);f(i),W(i,(d,c)=>C[c]=d,d=>C==null?void 0:C[d],()=>[o]),T(()=>{A(i,"href",l.type==="game"?`${e(a).url}`:`/games/${g().params.game}/files${e(a).url}`),A(w,"style",`background-image: url(${(l.type==="game"?e(a).gameImageUrl:e(a).fileImageUrl)??""});`),U(G,e(a).title),R(N,`absolute inset-0 transition-colors bg-black ${(e(a).id===(l.type==="game"?e(E):e(L))?"bg-opacity-0":"bg-opacity-60")??""} group-hover:bg-opacity-0`)}),p(n,i)}),p(r,s)}),f(J),f(k),fe(k,(r,s)=>be(r,s),()=>({options:Z}));var te=b(k,2);pe(te,{children:(r,s)=>{oe();var t=le();T(()=>U(t,l.type==="game"?"Games":"Documents")),p(r,t)},$$slots:{default:!0}}),f(V),xe(F,()=>e(y),r=>m(y,r)),me("emblaInit",k,ee),ne(1,V,()=>ve,()=>({duration:300})),p(X,V),ie()}de(["click"]);export{Pe as V};
