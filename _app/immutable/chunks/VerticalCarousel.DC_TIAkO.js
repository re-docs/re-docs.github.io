import{a as n,t as S,c as H,b as ae}from"./disclose-version.UERM2Wr9.js";import{p as te,u as le,a as re,f as J,g as a,t as w,b as p,e as U,c as g,s as f,r as v,n as se}from"./runtime.Did4smys.js";import{d as ie,s as oe,e as de,b as ce,a as E}from"./store.CtHX3vqK.js";import{a as me,i as j,p as h}from"./props.CHryXNgJ.js";import{t as ge,e as K,i as M,f as ve}from"./index.tk6QK5PP.js";import{a as ne,C as pe,e as fe,s as O}from"./ContentName.ClbEL4Wy.js";import{r as be,s as V}from"./gameStore.LkgFEKjO.js";import{b as ue}from"./input.Bnsn6Y9I.js";import{b as Q}from"./this.DemHFA8P.js";import{p as _e}from"./stores.aUN1ULZI.js";var he=S("<div> </div>"),xe=S('<a class="flex flex-col embla__slide xl:p-3.5 p-2.5 gap-[.4375rem] border-b border-gray-500 relative group w-full xl:h-64 lg:h-56 md:h-40 shrink-0 text-center"><div class="flex-1 bg-center bg-cover border border-gray-500"></div> <div> </div> <!> <div></div></a>'),ye=S("<div> </div>"),Ce=S('<a class="flex flex-col embla__slide xl:p-3.5 p-2.5 gap-[.4375rem] border-b border-gray-500 relative group w-full xl:h-64 lg:h-56 md:h-40 shrink-0 text-center"><div class="flex-1 bg-center bg-cover border border-gray-500"></div> <div> </div> <!> <div></div></a>'),Le=S('<div class="border border-gray-500 sticky xl:top-[calc(3.5rem+1.75rem+1px)] lg:top-[calc(3rem+1.5rem+1px)] md:top-[calc(3rem+1.25rem+1px)] xl:h-[calc(100svh-calc(7rem+1px))] lg:h-[calc(100svh-calc(6rem+1px))] md:h-[calc(100svh-calc(5.5rem+1px))] md:flex hidden flex-col xl:text-base text-sm xl:w-64 lg:w-56 md:w-40"><input type="search" class="relative w-full text-black bg-gray-200 placeholder:text-gray-700 xl:h-10 lg:h-9 md:h-8 xl:pl-4 lg:pl-3 md:pl-2 xl:pr-[3.25rem] lg:pr-[2.625rem] md:pr-8 focus:outline-none" placeholder="Search..."> <div class="flex-1 overflow-hidden text-xs embla xl:text-sm bg-stone-900"><div class="flex flex-col h-full embla__container"><!></div></div> <!></div>');function Fe(R,r){te(r,!0);const W=oe(),u=()=>ce(_e,"$page",W);let q=me(r,"searchedItems",7),X={loop:!0,axis:"y"},_=U(""),x=[],y=[],A=U(void 0),D=U(-1),C=U(-1),Y=U(!0);function Z(l){p(A,h(l.detail)),p(Y,h(a(A).internalEngine().slideLooper.canLoop()))}const z=(l,s)=>{if(a(_)){const t=y.filter(e=>e);for(let e=0;e<t.length&&t[e];(e+=1)-1){const o=t[e];o.lastChild.classList.remove("bg-opacity-0"),o.lastChild.classList.add("bg-opacity-75")}const m=t[l];m.lastChild.classList.remove("bg-opacity-75"),m.lastChild.classList.add("bg-opacity-0")}else{const t=x;for(let e=0;e<t.length&&t[e];(e+=1)-1){const o=t[e];o.lastChild.classList.remove("bg-opacity-0"),o.lastChild.classList.add("bg-opacity-75")}const m=t[l];m.lastChild.classList.remove("bg-opacity-75"),m.lastChild.classList.add("bg-opacity-0")}a(A).scrollTo(l),r.type==="game"?p(D,h(s)):p(C,h(s))};le(()=>{var l,s;u().params.file||p(C,-1),a(_)&&q(r.items.filter(t=>t.title.toLowerCase().includes(a(_).toLowerCase()))),r.type==="game"?p(D,h((l=r.items.find(t=>t.url===`/games/${u().params.game}/files`))==null?void 0:l.id)):p(C,h((s=r.items.find(t=>`/games/${u().params.game}/files${t.url}`===u().url.pathname))==null?void 0:s.id))});var T=Le(),F=g(T);be(F);var L=f(F,2),B=g(L),$=g(B);j($,()=>a(_),l=>{var s=H(),t=J(s);K(t,17,q,M,(m,e,o)=>{var i=xe();i.__click=()=>z(o,a(e).id);var k=g(i),b=f(k,2),G=g(b,!0);v(b);var I=f(b,2);j(I,()=>r.type==="game",d=>{var c=he(),P=g(c);v(c),w(()=>E(P,`(${a(e).releaseDate??""})`)),n(d,c)});var N=f(I,2);v(i),Q(i,(d,c)=>y[c]=d,d=>y==null?void 0:y[d],()=>[o]),w(()=>{V(i,"href",r.type==="game"?`${a(e).url}`:`/games/${u().params.game}/files${a(e).url}`),V(k,"style",`background-image: url(${(r.type==="game"?a(e).gameImageUrl:a(e).fileImageUrl)??""});`),E(G,a(e).title),O(N,`absolute inset-0 transition-colors bg-black ${(a(e).id===(r.type==="game"?a(D):a(C))?"bg-opacity-0":"bg-opacity-75")??""} group-hover:bg-opacity-0`)}),n(m,i)}),n(l,s)},l=>{var s=H(),t=J(s);K(t,17,()=>r.items,M,(m,e,o)=>{var i=Ce();i.__click=()=>z(o,a(e).id);var k=g(i),b=f(k,2),G=g(b,!0);v(b);var I=f(b,2);j(I,()=>r.type==="game",d=>{var c=ye(),P=g(c);v(c),w(()=>E(P,`(${a(e).releaseDate??""})`)),n(d,c)});var N=f(I,2);v(i),Q(i,(d,c)=>x[c]=d,d=>x==null?void 0:x[d],()=>[o]),w(()=>{V(i,"href",r.type==="game"?`${a(e).url}`:`/games/${u().params.game}/files${a(e).url}`),V(k,"style",`background-image: url(${(r.type==="game"?a(e).gameImageUrl:a(e).fileImageUrl)??""});`),E(G,a(e).title),O(N,`absolute inset-0 transition-colors bg-black ${(a(e).id===(r.type==="game"?a(D):a(C))?"bg-opacity-0":"bg-opacity-75")??""} group-hover:bg-opacity-0`)}),n(m,i)}),n(l,s)}),v(B),v(L),ne(L,(l,s)=>fe(l,s),()=>({options:X}));var ee=f(L,2);pe(ee,{children:(l,s)=>{se();var t=ae();w(()=>E(t,r.type==="game"?"Games":"Files")),n(l,t)},$$slots:{default:!0}}),v(T),ue(F,()=>a(_),l=>p(_,l)),de("emblaInit",L,Z),ge(1,T,()=>ve,()=>({duration:300})),n(R,T),re()}ie(["click"]);export{Fe as V};
